!function(t,e){e.login=function(n,r){if(r=r||t.noop,n=n||{},n.account=n.account||"",n.password=n.password||"",n.account.length<5)return r("账号最短为 5 个字符");if(n.password.length<6)return r("密码最短为 6 个字符");var o=JSON.parse(localStorage.getItem("$users")||"[]"),a=o.some(function(t){return n.account==t.account&&n.password==t.password});return a?e.createState(n.account,r):r("用户名或密码错误")},e.createState=function(t,n){var r=e.getState();return r.account=t,r.token="token123456789",e.setState(r),n()},e.reg=function(e,r){if(r=r||t.noop,e=e||{},e.account=e.account||"",e.password=e.password||"",e.account.length<5)return r("用户名最短需要 5 个字符");if(e.password.length<6)return r("密码最短需要 6 个字符");if(!n(e.email))return r("邮箱地址不合法");var o=JSON.parse(localStorage.getItem("$users")||"[]");return o.push(e),localStorage.setItem("$users",JSON.stringify(o)),r()},e.getState=function(){var t=localStorage.getItem("$state")||"{}";return JSON.parse(t)},e.setState=function(t){t=t||{},localStorage.setItem("$state",JSON.stringify(t))};var n=function(t){return t=t||"",t.length>3&&t.indexOf("@")>-1};e.forgetPassword=function(e,r){return r=r||t.noop,n(e)?r(null,"新的随机密码已经发送到您的邮箱，请查收邮件。"):r("邮箱地址不合法")},e.setSettings=function(t){t=t||{},localStorage.setItem("$settings",JSON.stringify(t))},e.getSettings=function(){var t=localStorage.getItem("$settings")||"{}";return JSON.parse(t)},e.isInstalled=function(t){if("qihoo"===t&&mui.os.plus)return!0;if(mui.os.android){var e=plus.android.runtimeMainActivity(),n=e.getPackageManager(),r=plus.android.importClass(n),o={qq:"com.tencent.mobileqq",weixin:"com.tencent.mm",sinaweibo:"com.sina.weibo"};try{return n.getPackageInfo(o[t],r.GET_ACTIVITIES)}catch(t){}}else switch(t){case"qq":var a=plus.ios.import("TencentOAuth");return a.iphoneQQInstalled();case"weixin":var s=plus.ios.import("WXApi");return s.isWXAppInstalled();case"sinaweibo":var i=plus.ios.import("WeiboSDK");return i.isWeiboAppInstalled()}}}(mui,window.app={});