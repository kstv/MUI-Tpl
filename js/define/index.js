define("./common",[],function(require,exports,module){exports.formatNum=function(e){if(e.length<=3)return e;if(!/^(\+|-)?(\d+)(\.\d+)?$/.test(e))return e;var t=RegExp.$1,n=RegExp.$2,a=RegExp.$3,o=new RegExp;for(o.compile("(\\d)(\\d{3})(,|$)");o.test(n);)n=n.replace(o,"$1,$2$3");return t+""+n+a},Date.prototype.formatDate=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},exports.upDate=function(e){var t=plus.nativeUI.showWaiting();$.ajax({type:"get",contentType:"update.json",dataType:"json",async:!1,url:url+"/isUpdate",data:{vno:e},success:function(e){if(0==e.data.isUpdate)mui.toast("您所使用的已经是最新版本");else if(0==e.data.forcedUpdate){mui.toast("有新版本可选择更新");var n=["是","否"];mui.confirm("有可更新版本"+e.data.id,"提示",n,function(t){if(0==t.index){var n=e.data.downLoadUrl,a=plus.downloader.createDownload(n,{},function(e,t){if(mui.toast("正在下载..."),200==t){var n=e.filename;plus.runtime.install(n),console.log(e.filename)}else alert("Download failed: "+t)});a.start()}})}else{var a=e.data.downLoadUrl,o=plus.downloader.createDownload(a,{},function(e,t){if(mui.toast("正在下载..."),200==t){var n=e.filename;plus.runtime.install(n),console.log(e.filename)}else alert("Download failed: "+t)});o.start()}t.close(),console.log(JSON.stringify(e))},error:function(e){console.log(JSON.stringify(e))}})},exports.upDate1=function(e){var t=plus.nativeUI.showWaiting();$.ajax({type:"get",contentType:"application/json",dataType:"json",async:!1,url:url+"/isUpdate",data:{vno:e},success:function(e){if(0==e.data.isUpdate);else if(0==e.data.forcedUpdate){mui.toast("有新版本可选择更新");var n=["是","否"];mui.confirm("有可更新版本"+e.data.id,"提示",n,function(t){if(0==t.index){var n=e.data.downLoadUrl,a=plus.downloader.createDownload(n,{},function(e,t){if(mui.toast("正在下载..."),200==t){var n=e.filename;plus.runtime.install(n),console.log(e.filename)}else alert("Download failed: "+t)});a.start()}})}else{var a=e.data.downLoadUrl,o=plus.downloader.createDownload(a,{},function(e,t){if(mui.toast("正在下载..."),200==t){var n=e.filename;plus.runtime.install(n),console.log(e.filename)}else alert("Download failed: "+t)});o.start()}t.close(),console.log(JSON.stringify(e))},error:function(e){console.log(JSON.stringify(e))}})},mui.plusReady(function(){var e=null;mui.back=function(){e?(new Date).getTime()-e<2e3&&plus.runtime.quit():(e=(new Date).getTime(),mui.toast("再按一次退出系统!"),setTimeout(function(){e=null},2e3))}})}),define("",["./common"],function(require,exports,module){window.addEventListener("reLode",function(){window.location.reload()});require("./common")});